{"version":3,"sources":["webpack://ckeditor-axe/./src/frame.js"],"names":["window","addEventListener","event","origin","console","error","msg","data","command","CKEDITOR","parent","editor","instances","args","arguments","context","document","body","axe","run","options","results","tools","callFunction","callback"],"mappings":"AAIEA,OAAOC,iBAAiB,YAAW,SAASC;IAG1C,IAAIF,OAAOG,WAAWD,EAAMC,QAE1B,OADAC,QAAQC,MAAM;KACP;IAGT,IAAIC,IAAMJ,EAAMK;IAChB,SAA2B,MAAhBD,EAAIE,SAEb,OADAJ,QAAQC,MAAM;KACP;IAGT,IAAII,IAAWT,OAAOU,OAAOD;IAC7B,SACwB,MAAfH,EAAIK,eAC+B,MAAnCF,EAASG,UAAUN,EAAIK,SAG9B,OADAP,QAAQC,MAAM;KACP;IAIT,IAAoB,UAAhBC,EAAIE,SAAmB;QACzB,IAAIK,IAAOP,EAAIQ,WACXC,IAAUC,SAASC;QAEvBF,SAAkC,MAAjBF,EAAKE,UAA0BF,EAAKE,UAAUA,GAE/DG,IAAIC,IAAIJ,GAASF,EAAKO,UAAS,SAASf,GAAOgB;YAC7CZ,EAASa,MAAMC,aAAaV,EAAKW,UAAUnB,GAAOgB,GAASf,EAAIK;;WAGjEP,QAAQC,MAAM","file":"frame.min.js","sourcesContent":["(function() {\n  /**\n   * We will add a small even listener to get signal from parent window to execute aXe check.\n   */\n  window.addEventListener(\"message\", function(event) {\n    // @todo: We should do something to log this errors in parent window.\n    // Validate message for security.\n    if (window.origin !== event.origin) {\n      console.error(\"Insecure command detected.\");\n      return false;\n    }\n    // Validate incoming command.\n    let msg = event.data;\n    if (typeof msg.command === \"undefined\") {\n      console.error(\"Command type is not defined.\");\n      return false;\n    }\n    // Validate editor instance.\n    let CKEDITOR = window.parent.CKEDITOR;\n    if (\n      typeof msg.editor === \"undefined\" ||\n      typeof CKEDITOR.instances[msg.editor] === \"undefined\"\n    ) {\n      console.error(\"Editor instance is invalid.\");\n      return false;\n    }\n\n    // Execute command (at current moment we have only one type of commands \"run\").\n    if (msg.command === \"run\") {\n      let args = msg.arguments;\n      let context = document.body;\n      // We will allow developer to provide custom context if they want.\n      context = typeof args.context !== \"undefined\" ? args.context : context;\n      // Redirect execution to parent frame.\n      axe.run(context, args.options, function(error, results) {\n        CKEDITOR.tools.callFunction(args.callback, error, results, msg.editor);\n      });\n    } else {\n      console.error(\"Invalid command.\");\n    }\n  });\n})();\n"],"sourceRoot":""}